<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Кликер</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body {
    background: linear-gradient(135deg, #ffdde1, #ee9ca7);
    font-family: 'Comic Sans MS', cursive, sans-serif;
    color: #4a004e;
    margin: 0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    text-align: center;
    padding-top: 50px;
}

h1, h2, p {
    animation: fadeIn 2s ease-in-out;
}

h1 { font-size: 2.5rem; margin-bottom: 10px; }
h2 { font-size: 1.5rem; margin-bottom: 15px; }
p { font-size: 1.2rem; margin: 5px 0; }

#clickerBtn {
    width: 150px;
    height: 150px;
    font-size: 1.5rem;
    border-radius: 50%;
    background: linear-gradient(45deg, #ff66b2, #ffcc66);
    border: none;
    color: white;
    box-shadow: 0 0 15px rgba(255, 102, 178, 0.6);
    transition: all 0.2s ease;
    margin-top: 50px;
    position: relative;
    user-select: none;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    line-height: 1.2;
    padding: 10px;
    word-wrap: break-word;
    white-space: normal;
}

/* Hover */
#clickerBtn:hover {
    transform: scale(1.05);
    box-shadow: 0 0 25px rgba(0, 102, 255, 0.8);
}

/* Active */
#clickerBtn:active {
    transform: scale(0.95);
    box-shadow: 0 0 10px rgba(0, 102, 255, 0.8);
}

#clickerBtn.jump {
    transform: scale(1.3);
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>
<div class="text p-4">
    <h1>Ха!</h1>
    <h2 id="score">Загрузка результатов...</h2>
    <p id="message">Теперь снова кликаем!</p>
</div>

<button id="clickerBtn">Нажми меня!</button>

<script>
const params = new URLSearchParams(window.location.search);
const scoreVal = params.get("score");
const totalVal = params.get("total");

const scoreEl = document.getElementById("score");
const messageEl = document.getElementById("message");
const button = document.getElementById('clickerBtn');

let clicks = 0;
const standardSize = 150;
const minSize = 80;
const maxSize = 250;

// Изначальная строка с баллами
if(scoreVal && totalVal){
    scoreEl.innerText = `Ты набрала ${scoreVal} из ${totalVal} баллов!`;
}

// Генерация случайного градиента
function getRandomGradient() {
    const colors = [];
    for(let i=0;i<3;i++){
        colors.push(`#${Math.floor(Math.random()*16777215).toString(16)}`);
    }
    return `linear-gradient(45deg, ${colors.join(', ')})`;
}

button.addEventListener('click', () => {
    clicks++;

    // Кнопка прыгает и меняет цвет сразу
    button.classList.add('jump');
    setTimeout(() => button.classList.remove('jump'), 150);
    button.style.background = getRandomGradient();

    // После 48 кликов меняем текст полностью (кроме заголовка)
    if(clicks === 48){
        scoreEl.innerText = "Но это еще не все!";
        messageEl.innerText = "Приготовься к следующему этапу!";
        button.innerText = "Продолжить";

        // Возвращаем кнопку под текст
        button.style.position = "relative";
        button.style.top = "";
        button.style.left = "";
        button.style.marginTop = "30px";
        button.style.width = "180px";
        button.style.height = "180px";
        button.style.fontSize = "1.2rem";
        button.style.padding = "15px";
        button.style.lineHeight = "1.2";
        button.style.whiteSpace = "normal";

        // Кнопка ведет на eight-index.html
        button.onclick = () => { window.location.href = "eight-index.html"; };
        return;
    }

    // Поведение кнопки до 48 кликов (движение сразу после первого клика)
    if(clicks >= 1 && clicks < 48){
        const newSize = Math.floor(Math.random() * (maxSize - minSize + 1)) + minSize;
        button.style.width = newSize + 'px';
        button.style.height = newSize + 'px';
        button.style.fontSize = Math.min((newSize / standardSize * 1.5), 2) + 'rem';

        const maxTop = window.innerHeight - newSize - 20;
        const maxLeft = window.innerWidth - newSize - 20;
        const newTop = Math.floor(Math.random() * maxTop);
        const newLeft = Math.floor(Math.random() * maxLeft);

        button.style.position = "absolute";
        button.style.top = newTop + 'px';
        button.style.left = newLeft + 'px';
    }

    // На 100 кликах переходим на следующую страницу
    if(clicks >= 100){
        window.location.href = 'eight-index.html';
    }
});
</script>
</body>
</html>
